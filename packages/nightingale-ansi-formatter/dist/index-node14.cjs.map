{"version":3,"file":"index-node14.cjs","sources":["../src/index.ts"],"sourcesContent":["import ansi from 'ansi-styles';\nimport { styleToHexColor, formatRecordToString } from 'nightingale-formatter';\nimport type { Styles, LogRecord, Metadata } from 'nightingale-types';\n\nexport type { Styles } from 'nightingale-types';\n\ninterface CodePair {\n  open: string;\n  close: string;\n}\n\ntype AnsiStyles = Record<string, CodePair | undefined>;\n\nconst ansiStyles: AnsiStyles = {\n  black: ansi.black,\n  red: ansi.red,\n  green: ansi.green,\n  yellow: ansi.yellow,\n  blue: ansi.blue,\n  magenta: ansi.magenta,\n  cyan: ansi.cyan,\n  white: ansi.white,\n  gray: ansi.gray,\n\n  bgBlack: ansi.bgBlack,\n  bgRed: ansi.bgRed,\n  bgGreen: ansi.bgGreen,\n  bgYellow: ansi.bgYellow,\n  bgBlue: ansi.bgBlue,\n  bgMagenta: ansi.bgMagenta,\n  bgCyan: ansi.bgCyan,\n  bgWhite: ansi.bgWhite,\n\n  bold: ansi.bold,\n  underline: ansi.underline,\n\n  // http://www.calmar.ws/vim/256-xterm-24bit-rgb-color-chart.html\n  orange: {\n    open: ansi.color.ansi256.hex(styleToHexColor.orange),\n    close: ansi.color.close,\n  },\n  'gray-light': {\n    open: ansi.color.ansi256.hex(styleToHexColor['gray-light']),\n    close: ansi.color.close,\n  },\n};\n\nexport function style(styles: Styles, string: string): string {\n  if (!styles || styles.length === 0 || !string) {\n    return string;\n  }\n\n  // eslint-disable-next-line unicorn/no-array-reduce\n  return styles.reduce((styledString: string, styleName: string) => {\n    const codePair: CodePair | undefined = ansiStyles[styleName];\n\n    if (!codePair) {\n      throw new Error(`Unknown style: ${styleName}`);\n    }\n\n    return codePair.open + styledString + codePair.close;\n  }, string);\n}\n\n/**\n * @param {Object} record\n * @returns {string}\n */\nexport default function ansiFormat<T extends Metadata>(\n  record: LogRecord<T>,\n): string {\n  return formatRecordToString(record, style);\n}\n"],"names":["ansiStyles","black","ansi","red","green","yellow","blue","magenta","cyan","white","gray","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","bold","underline","orange","open","color","ansi256","hex","styleToHexColor","close","style","styles","string","length","reduce","styledString","styleName","codePair","Error","ansiFormat","record","formatRecordToString"],"mappings":";;;;;;;;;;;AAaA,MAAMA,UAAsB,GAAG;EAC7BC,KAAK,EAAEC,aAAI,CAACD,KADiB;EAE7BE,GAAG,EAAED,aAAI,CAACC,GAFmB;EAG7BC,KAAK,EAAEF,aAAI,CAACE,KAHiB;EAI7BC,MAAM,EAAEH,aAAI,CAACG,MAJgB;EAK7BC,IAAI,EAAEJ,aAAI,CAACI,IALkB;EAM7BC,OAAO,EAAEL,aAAI,CAACK,OANe;EAO7BC,IAAI,EAAEN,aAAI,CAACM,IAPkB;EAQ7BC,KAAK,EAAEP,aAAI,CAACO,KARiB;EAS7BC,IAAI,EAAER,aAAI,CAACQ,IATkB;EAW7BC,OAAO,EAAET,aAAI,CAACS,OAXe;EAY7BC,KAAK,EAAEV,aAAI,CAACU,KAZiB;EAa7BC,OAAO,EAAEX,aAAI,CAACW,OAbe;EAc7BC,QAAQ,EAAEZ,aAAI,CAACY,QAdc;EAe7BC,MAAM,EAAEb,aAAI,CAACa,MAfgB;EAgB7BC,SAAS,EAAEd,aAAI,CAACc,SAhBa;EAiB7BC,MAAM,EAAEf,aAAI,CAACe,MAjBgB;EAkB7BC,OAAO,EAAEhB,aAAI,CAACgB,OAlBe;EAoB7BC,IAAI,EAAEjB,aAAI,CAACiB,IApBkB;EAqB7BC,SAAS,EAAElB,aAAI,CAACkB,SArBa;AAuB7B;AACAC,EAAAA,MAAM,EAAE;AACNC,IAAAA,IAAI,EAAEpB,aAAI,CAACqB,KAAL,CAAWC,OAAX,CAAmBC,GAAnB,CAAuBC,oCAAe,CAACL,MAAvC,CADA;AAENM,IAAAA,KAAK,EAAEzB,aAAI,CAACqB,KAAL,CAAWI,KAAAA;GA1BS;EA4B7B,YAAc,EAAA;AACZL,IAAAA,IAAI,EAAEpB,aAAI,CAACqB,KAAL,CAAWC,OAAX,CAAmBC,GAAnB,CAAuBC,oCAAe,CAAC,YAAD,CAAtC,CADM;AAEZC,IAAAA,KAAK,EAAEzB,aAAI,CAACqB,KAAL,CAAWI,KAAAA;AAFN,GAAA;AA5Be,CAA/B,CAAA;AAkCO,SAASC,KAAT,CAAeC,MAAf,EAA+BC,MAA/B,EAAuD;EAC5D,IAAI,CAACD,MAAD,IAAWA,MAAM,CAACE,MAAP,KAAkB,CAA7B,IAAkC,CAACD,MAAvC,EAA+C;AAC7C,IAAA,OAAOA,MAAP,CAAA;AACD,GAH2D;;;EAM5D,OAAOD,MAAM,CAACG,MAAP,CAAc,CAACC,YAAD,EAAuBC,SAAvB,KAA6C;AAChE,IAAA,MAAMC,QAA8B,GAAGnC,UAAU,CAACkC,SAAD,CAAjD,CAAA;;IAEA,IAAI,CAACC,QAAL,EAAe;AACb,MAAA,MAAM,IAAIC,KAAJ,CAAW,CAAiBF,eAAAA,EAAAA,SAAU,EAAtC,CAAN,CAAA;AACD,KAAA;;IAED,OAAOC,QAAQ,CAACb,IAAT,GAAgBW,YAAhB,GAA+BE,QAAQ,CAACR,KAA/C,CAAA;GAPK,EAQJG,MARI,CAAP,CAAA;AASD,CAAA;AAED;AACA;AACA;AACA;;AACe,SAASO,UAAT,CACbC,MADa,EAEL;AACR,EAAA,OAAOC,yCAAoB,CAACD,MAAD,EAASV,KAAT,CAA3B,CAAA;AACD;;;;;"}