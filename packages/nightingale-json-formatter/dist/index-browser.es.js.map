{"version":3,"file":"index-browser.es.js","sources":["../src/index.ts"],"sourcesContent":["import type { LogRecord, Metadata } from 'nightingale-types';\n\nfunction map2object(map: Map<unknown, unknown>): unknown {\n  const object: Record<string, unknown> = {};\n\n  map.forEach((value, key) => {\n    if (typeof key === 'object') {\n      // ignore key\n      return;\n    }\n\n    object[String(key)] = value;\n  });\n\n  return object;\n}\n\nfunction stringify(value: unknown, space?: string | number): string {\n  return JSON.stringify(\n    value,\n    (key, objectValue) => {\n      if (objectValue instanceof Map) {\n        return map2object(objectValue);\n      }\n      if (objectValue instanceof Error) {\n        return {\n          message: objectValue.message,\n          stack: objectValue.stack,\n        };\n      }\n\n      return objectValue as unknown;\n    },\n    space,\n  );\n}\n\nexport default function format<T extends Metadata>(\n  record: LogRecord<T>,\n): string {\n  return stringify({\n    key: record.key,\n    level: record.level,\n    datetime: record.datetime,\n    message: record.message,\n    metadata: record.metadata,\n    extra: record.extra,\n  });\n}\n"],"names":["map2object","map","object","forEach","value","key","String","stringify","space","JSON","objectValue","Map","Error","message","stack","format","record","level","datetime","metadata","extra"],"mappings":"AAEA,SAASA,UAAT,CAAoBC,GAApB,EAAyD;EACvD,IAAMC,MAA+B,GAAG,EAAxC,CAAA;AAEAD,EAAAA,GAAG,CAACE,OAAJ,CAAY,UAACC,KAAD,EAAQC,GAAR,EAAgB;AAC1B,IAAA,IAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;AAC3B;AACA,MAAA,OAAA;AACD,KAAA;;AAEDH,IAAAA,MAAM,CAACI,MAAM,CAACD,GAAD,CAAP,CAAN,GAAsBD,KAAtB,CAAA;GANF,CAAA,CAAA;AASA,EAAA,OAAOF,MAAP,CAAA;AACD,CAAA;;AAED,SAASK,SAAT,CAAmBH,KAAnB,EAAmCI,KAAnC,EAAoE;EAClE,OAAOC,IAAI,CAACF,SAAL,CACLH,KADK,EAEL,UAACC,GAAD,EAAMK,WAAN,EAAsB;IACpB,IAAIA,WAAW,YAAYC,GAA3B,EAAgC;MAC9B,OAAOX,UAAU,CAACU,WAAD,CAAjB,CAAA;AACD,KAAA;;IACD,IAAIA,WAAW,YAAYE,KAA3B,EAAkC;MAChC,OAAO;QACLC,OAAO,EAAEH,WAAW,CAACG,OADhB;QAELC,KAAK,EAAEJ,WAAW,CAACI,KAAAA;OAFrB,CAAA;AAID,KAAA;;AAED,IAAA,OAAOJ,WAAP,CAAA;GAbG,EAeLF,KAfK,CAAP,CAAA;AAiBD,CAAA;;AAEc,SAASO,MAAT,CACbC,MADa,EAEL;AACR,EAAA,OAAOT,SAAS,CAAC;IACfF,GAAG,EAAEW,MAAM,CAACX,GADG;IAEfY,KAAK,EAAED,MAAM,CAACC,KAFC;IAGfC,QAAQ,EAAEF,MAAM,CAACE,QAHF;IAIfL,OAAO,EAAEG,MAAM,CAACH,OAJD;IAKfM,QAAQ,EAAEH,MAAM,CAACG,QALF;IAMfC,KAAK,EAAEJ,MAAM,CAACI,KAAAA;AANC,GAAD,CAAhB,CAAA;AAQD;;;;"}