{"version":3,"file":"index-node10-dev.es.js","sources":["../src/index.ts"],"sourcesContent":["import { LogRecord } from 'nightingale-types';\n\nfunction map2object(map: Map<any, any>): any {\n  const object: any = {};\n\n  map.forEach((value: any, key: any) => {\n    if (typeof key === 'object') {\n      // ignore key\n      return;\n    }\n\n    object[key] = value;\n  });\n\n  return object;\n}\n\nfunction stringify(value: any, space?: string | number): string {\n  return JSON.stringify(\n    value,\n    (key, value) => {\n      if (value instanceof Map) {\n        return map2object(value);\n      }\n      if (value instanceof Error) {\n        return {\n          message: value.message,\n          stack: value.stack,\n        };\n      }\n\n      return value;\n    },\n    space,\n  );\n}\n\nexport default function format<T>(record: LogRecord<T>) {\n  return stringify({\n    key: record.key,\n    level: record.level,\n    datetime: record.datetime,\n    message: record.message,\n    metadata: record.metadata,\n    extra: record.extra,\n  });\n}\n"],"names":["map2object","map","object","forEach","value","key","stringify","space","JSON","Map","Error","message","stack","format","record","level","datetime","metadata","extra"],"mappings":"AAEA,SAASA,UAAT,CAAoBC,GAApB,EAA6C;QACrCC,MAAW,GAAG,EAApB;EAEAD,GAAG,CAACE,OAAJ,CAAY,CAACC,KAAD,EAAaC,GAAb,KAA0B;QAChC,OAAOA,GAAP,KAAe,QAAnB,EAA6B;;;;;IAK7BH,MAAM,CAACG,GAAD,CAAN,GAAcD,KAAd;GANF;SASOF,MAAP;;;AAGF,SAASI,SAAT,CAAmBF,KAAnB,EAA+BG,KAA/B,EAAgE;SACvDC,IAAI,CAACF,SAAL,CACLF,KADK,EAEL,CAACC,GAAD,EAAMD,KAAN,KAAgB;QACVA,KAAK,YAAYK,GAArB,EAA0B;aACjBT,UAAU,CAACI,KAAD,CAAjB;;;QAEEA,KAAK,YAAYM,KAArB,EAA4B;aACnB;QACLC,OAAO,EAAEP,KAAK,CAACO,OADV;QAELC,KAAK,EAAER,KAAK,CAACQ;OAFf;;;WAMKR,KAAP;GAbG,EAeLG,KAfK,CAAP;;;AAmBF,AAAe,SAASM,MAAT,CAAmBC,MAAnB,EAAyC;SAC/CR,SAAS,CAAC;IACfD,GAAG,EAAES,MAAM,CAACT,GADG;IAEfU,KAAK,EAAED,MAAM,CAACC,KAFC;IAGfC,QAAQ,EAAEF,MAAM,CAACE,QAHF;IAIfL,OAAO,EAAEG,MAAM,CAACH,OAJD;IAKfM,QAAQ,EAAEH,MAAM,CAACG,QALF;IAMfC,KAAK,EAAEJ,MAAM,CAACI;GANA,CAAhB;;;;;"}