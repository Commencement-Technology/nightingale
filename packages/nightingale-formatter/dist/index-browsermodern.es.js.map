{"version":3,"file":"index-browsermodern.es.js","sources":["../src/levelToStyles.js","../src/levelToSymbol.js","../src/styleToHexColor.js","../src/styleToHtmlStyle.js","../src/formatObject.js","../src/formatRecordToString.js"],"sourcesContent":["import levels from 'nightingale-levels';\n\nexport default {\n  [levels.TRACE]: ['gray'],\n  [levels.DEBUG]: ['gray'],\n  // [levels.INFO]: ['gray'],\n  [levels.WARN]: ['yellow'],\n  [levels.ERROR]: ['red', 'bold'],\n  [levels.CRITICAL]: ['red', 'bold'],\n  [levels.FATAL]: ['bgRed', 'white'],\n  [levels.EMERGENCY]: ['bgRed', 'white'],\n};\n","import levels from 'nightingale-levels';\n\nexport default {\n  [levels.TRACE]: '•',\n  [levels.DEBUG]: '•',\n  [levels.INFO]: '→',\n  [levels.WARN]: '⚠',\n  [levels.ERROR]: '✖',\n  [levels.CRITICAL]: '!',\n  [levels.FATAL]: '‼',\n  [levels.EMERGENCY]: '‼',\n};\n","export default {\n  orange: 'ff5f00',\n  grayLight: '808080',\n  'gray-light': '808080',\n};\n","import hexColors from './styleToHexColor';\n\nexport default {\n  get reset() {\n    throw new Error();\n  },\n\n  // text style\n  bold: { open: 'font-weight: bold', close: 'font-weight: normal' },\n  italic: { open: 'font-style: italic', close: 'font-style: normal' },\n  underline: { open: 'text-decoration: underline', close: 'text-decoration: none' },\n  inverse: {\n    open: 'unicode-bidi: bidi-override; direction: rtl',\n    close: 'unicode-bidi: normal; direction: ltr',\n  },\n  strikethrough: { open: 'text-decoration: line-through', close: 'text-decoration: none' },\n\n  black: { open: 'color: black', close: 'color: initial' },\n  red: { open: 'color: #ff0020', close: 'color: initial' },\n  green: { open: 'color: #00b317', close: 'color: initial' },\n  yellow: { open: 'color: #ffcc00', close: 'color: initial' },\n  blue: { open: 'color: #00a0ff', close: 'color: initial' },\n  magenta: { open: 'color: #ff00a0', close: 'color: initial' },\n  cyan: { open: 'color: #00cfd8', close: 'color: initial' },\n  white: { open: 'color: white', close: 'color: initial' },\n  gray: { open: 'color: gray', close: 'color: initial' },\n\n  bgBlack: { open: 'background: black', close: 'background: initial' },\n  bgRed: { open: 'background: #ff0020', close: 'background: initial' },\n  bgGreen: { open: 'background: #00b317', close: 'background: initial' },\n  bgYellow: { open: 'background: #ffcc00', close: 'background: initial' },\n  bgBlue: { open: 'background: #00a0ff', close: 'background: initial' },\n  bgMagenta: { open: 'background: #ff00a0', close: 'background: initial' },\n  bgCyan: { open: 'background: #00cfd8', close: 'background: initial' },\n  bgWhite: { open: 'background: white', close: 'background: initial' },\n\n  orange: { open: `color: #${hexColors.orange}`, close: 'color: initial' },\n  grayLight: { open: `color: #${hexColors.grayLight}`, close: 'color: initial' },\n  'gray-light': { open: `color: #${hexColors.grayLight}`, close: 'color: initial' },\n};\n","/* eslint-disable no-use-before-define, max-lines, no-useless-concat, prefer-template */\n\nconst noStyleFn = (styles, value) => value;\n\nfunction tryStringify(arg) {\n  try {\n    return JSON.stringify(arg).replace(/\\\\n/g, '\\n');\n  } catch (_) {\n    return '[Circular]';\n  }\n}\n\nconst sameRawFormattedValue = value => ({ stringValue: value, formattedValue: value });\n\nfunction internalFormatValue(value, styleFn, styles, { padding, depth, maxDepth, objects }) {\n  const typeofValue = typeof value;\n\n  if (!styles) {\n    if (value == null) {\n      styles = ['cyan'];\n    } else {\n      switch (typeofValue) {\n        case 'boolean':\n          styles = ['green'];\n          break;\n        case 'number':\n          styles = ['yellow'];\n          break;\n        case 'string':\n          styles = ['orange'];\n          break;\n        case 'date':\n          styles = ['magenta'];\n          break;\n      }\n    }\n  }\n\n  let stringValue;\n  if (value === null) {\n    stringValue = 'null';\n  } else if (value === undefined) {\n    stringValue = 'undefined';\n  } else if (typeofValue === 'boolean') {\n    stringValue = value.toString();\n  } else if (value.constructor === Object) {\n    if (depth >= maxDepth) {\n      stringValue = '{Object...}';\n    } else {\n      return internalFormatObject(value, styleFn, undefined, {\n        padding,\n        depth: depth + 1,\n        maxDepth,\n        objects,\n      });\n    }\n  } else if (Array.isArray(value)) {\n    if (depth >= maxDepth) {\n      stringValue = '[Array...]';\n    } else {\n      return internalFormatArray(value, styleFn, { padding, depth: depth + 1, maxDepth, objects });\n    }\n  } else if (value instanceof Error) {\n    const stack = value.stack;\n    stringValue = stack.startsWith(value.message) ? stack : `${value.message}\\n${stack}`;\n  } else if (value instanceof Map || value instanceof WeakMap) {\n    const name = value.constructor.name;\n    if (depth >= maxDepth) {\n      stringValue = `{${name}...}`;\n    } else {\n      return internalFormatMap(name, value, styleFn, {\n        padding,\n        depth: depth + 1,\n        maxDepth,\n        objects,\n      });\n    }\n  } else if (value instanceof Set || value instanceof WeakSet) {\n    const name = value.constructor.name;\n    if (depth >= maxDepth) {\n      stringValue = `{${name}...}`;\n    } else {\n      return internalFormatSet(name, value, styleFn, {\n        padding,\n        depth: depth + 1,\n        maxDepth,\n        objects,\n      });\n    }\n  } else {\n    stringValue = tryStringify(value);\n  }\n\n  const formattedValue = styleFn(styles, stringValue);\n\n  return {\n    stringValue,\n    formattedValue,\n  };\n}\n\nconst separator = ',';\n\nconst internalFormatKey = (key, styleFn) => {\n  if (!key) return { stringKey: '', formattedKey: '' };\n  return {\n    stringKey: `${key}: `,\n    formattedKey: styleFn(['gray-light', 'bold'], `${key}:`) + ' ',\n  };\n};\n\nconst internalFormatMapKey = (key, styleFn, internalFormatParams) => {\n  const { stringValue, formattedValue } = internalFormatValue(\n    key,\n    noStyleFn,\n    undefined,\n    internalFormatParams,\n  );\n  return {\n    stringKey: stringValue + ' => ',\n    formattedKey: styleFn(['gray-light', 'bold'], `${formattedValue}:`) + ' ',\n  };\n};\n\nconst internalFormatIterator = (\n  values,\n  styleFn,\n  objectStyles,\n  { padding, depth, maxDepth, objects },\n  { prefix, suffix, prefixSuffixSpace = ' ', formatKey = internalFormatKey },\n) => {\n  let breakLine = false;\n  const formattedSeparator = () => styleFn(['gray'], separator);\n\n  const valuesMaxIndex = values.length - 1;\n  values = values.map(({ key, value }, index) => {\n    const nextDepth = depth + 1;\n    const internalFormatParams = { padding, depth: nextDepth, maxDepth, objects };\n\n    // key must be formatted before value (browser-formatter needs order)\n    const { stringKey, formattedKey } = formatKey(key, styleFn, internalFormatParams);\n\n    let { stringValue, formattedValue } = internalFormatValue(\n      value,\n      styleFn,\n      key && objectStyles && objectStyles[key],\n      internalFormatParams,\n    );\n\n    if (stringValue && (stringValue.length > 80 || stringValue.indexOf('\\n') !== -1)) {\n      breakLine = true;\n      stringValue = stringValue.replace(/\\n/g, `\\n${padding}`);\n      formattedValue = formattedValue.replace(/\\n/g, `\\n${padding}`);\n    }\n\n    return {\n      stringValue: stringKey + stringValue + (index === valuesMaxIndex ? '' : separator),\n      // eslint-disable-next-line no-useless-concat\n      formattedValue:\n        formattedKey + formattedValue + (index === valuesMaxIndex ? '' : formattedSeparator()),\n      // note: we need to format the separator for each values for browser-formatter\n    };\n  });\n\n  return {\n    stringValue:\n      prefix +\n      values\n        .map(breakLine ? v => `\\n${padding}${v.stringValue}` : fv => fv.stringValue)\n        .join(breakLine ? '\\n' : ' ') +\n      suffix,\n    // eslint-disable-next-line prefer-template\n    formattedValue:\n      `${prefix}${breakLine ? '' : prefixSuffixSpace}` +\n      values\n        .map(breakLine ? v => `\\n${padding}${v.formattedValue}` : v => v.formattedValue)\n        .join(breakLine ? '' : ' ') +\n      `${breakLine ? ',\\n' : prefixSuffixSpace}${suffix}`,\n  };\n};\n\nfunction internalFormatObject(\n  object,\n  styleFn,\n  objectStyles,\n  { padding, depth, maxDepth, objects },\n) {\n  if (objects.has(object)) {\n    return sameRawFormattedValue('{Circular Object}');\n  }\n\n  const keys = Object.keys(object);\n  if (keys.length === 0) {\n    return sameRawFormattedValue('{}');\n  }\n\n  objects.add(object);\n\n  const result = internalFormatIterator(\n    keys.map(key => ({ key, value: object[key] })),\n    styleFn,\n    objectStyles,\n    { padding, depth, maxDepth, objects },\n    { prefix: '{', suffix: '}' },\n  );\n\n  objects.delete(object);\n\n  return result;\n}\n\nfunction internalFormatMap(name, map, styleFn, { padding, depth, maxDepth, objects }) {\n  if (objects.has(map)) {\n    return sameRawFormattedValue(`{Circular ${name}`);\n  }\n\n  const keys = Array.from(map.keys());\n  if (keys.length === 0) {\n    return sameRawFormattedValue(`${name} {}`);\n  }\n\n  objects.add(map);\n\n  const result = internalFormatIterator(\n    keys.map(key => ({ key, value: map.get(key) })),\n    styleFn,\n    undefined,\n    { padding, depth, maxDepth, objects },\n    { prefix: `${name} {`, suffix: '}', formatKey: internalFormatMapKey },\n  );\n\n  objects.delete(map);\n\n  return result;\n}\n\nfunction internalFormatArray(array, styleFn, { padding, depth, maxDepth, objects }) {\n  if (objects.has(array)) {\n    return sameRawFormattedValue('{Circular Array}');\n  }\n\n  if (array.length === 0) {\n    return sameRawFormattedValue('[]');\n  }\n\n  objects.add(array);\n\n  const result = internalFormatIterator(\n    array.map(value => ({ key: undefined, value })),\n    styleFn,\n    undefined,\n    { padding, depth, maxDepth, objects },\n    { prefix: '[', suffix: ']', prefixSuffixSpace: '' },\n  );\n\n  objects.delete(array);\n\n  return result;\n}\n\nfunction internalFormatSet(name, set, styleFn, { padding, depth, maxDepth, objects }) {\n  if (objects.has(set)) {\n    return sameRawFormattedValue(`{Circular ${name}`);\n  }\n\n  const values = Array.from(set.values());\n  if (values.length === 0) {\n    return sameRawFormattedValue(`${name} []`);\n  }\n\n  objects.add(set);\n\n  const result = internalFormatIterator(\n    values.map(value => ({ key: undefined, value })),\n    styleFn,\n    undefined,\n    { padding, depth, maxDepth, objects },\n    { prefix: `${name} [`, suffix: ']' },\n  );\n\n  objects.delete(set);\n\n  return result;\n}\n\nexport default function formatObject(\n  object,\n  styleFn,\n  objectStyles,\n  { padding = '  ', maxDepth = 10 } = {},\n) {\n  const { formattedValue: result } = internalFormatObject(object, styleFn, objectStyles, {\n    padding,\n    maxDepth,\n    depth: 0,\n    objects: new Set(),\n  });\n\n  if (result === '{}') {\n    return '';\n  }\n\n  return result;\n}\n","import levelToSymbol from './levelToSymbol';\nimport levelToStyles from './levelToStyles';\nimport formatObject from './formatObject';\n\nexport default function formatRecordToString(record, style, options) {\n  const parts = [];\n\n  if (record.displayName) {\n    parts.push(style(['gray-light'], record.displayName));\n  } else if (record.key) {\n    parts.push(style(['gray-light'], record.key));\n  }\n\n  if (record.datetime) {\n    parts.push(style(['gray', 'bold'], record.datetime.toTimeString().split(' ')[0]));\n    /* new Date().toFormat('HH24:MI:SS') */\n  }\n\n  let message = record.symbol || levelToSymbol[record.level];\n  const styles = record.styles || levelToStyles[record.level];\n\n  if (record.message) {\n    if (message) {\n      message += ` ${record.message}`;\n    } else {\n      message = record.message;\n    }\n  }\n\n  if (message) {\n    if (styles) {\n      message = style(styles, message);\n    }\n    parts.push(message);\n  }\n\n  ['metadata', 'extra', 'context'].forEach(key => {\n    if (!record[key]) {\n      return;\n    }\n\n    const stringObject = formatObject(record[key], style, record[`${key}Styles`]);\n\n    if (!stringObject) {\n      return;\n    }\n\n    parts.push(stringObject);\n  });\n\n  return parts.join(' ');\n}\n"],"names":["levels","TRACE","DEBUG","WARN","ERROR","CRITICAL","FATAL","EMERGENCY","INFO","reset","Error","open","close","hexColors","orange","grayLight","noStyleFn","styles","value","tryStringify","arg","JSON","stringify","replace","_","sameRawFormattedValue","stringValue","formattedValue","internalFormatValue","styleFn","padding","depth","maxDepth","objects","typeofValue","undefined","toString","constructor","Object","internalFormatObject","Array","isArray","internalFormatArray","stack","startsWith","message","Map","WeakMap","name","internalFormatMap","Set","WeakSet","internalFormatSet","separator","internalFormatKey","key","stringKey","formattedKey","internalFormatMapKey","internalFormatParams","internalFormatIterator","values","objectStyles","prefix","suffix","prefixSuffixSpace","formatKey","breakLine","formattedSeparator","valuesMaxIndex","length","map","index","indexOf","v","fv","join","object","has","keys","add","result","delete","from","get","array","set","formatObject","formatRecordToString","record","style","parts","displayName","push","datetime","toTimeString","split","symbol","levelToSymbol","level","levelToStyles","forEach","stringObject"],"mappings":"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"}