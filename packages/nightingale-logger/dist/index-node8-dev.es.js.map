{"version":3,"file":"index-node8-dev.es.js","sources":["../src/index.js"],"sourcesContent":["/* eslint-disable max-lines, flowtype/sort-keys */\n\nimport util from 'util';\nimport levels from 'nightingale-levels';\n\ntype Record = {\n  level: number,\n  key: string,\n  displayName?: ?string,\n  datetime: Date,\n  message: string,\n  context?: ?Object,\n  metadata?: ?Object,\n  extra?: ?Object,\n};\n\ntype Handler = {\n  minLevel: number,\n  isHandling?: ?() => boolean,\n  handle?: ?(record: Record) => boolean,\n};\n\ntype Processor = (record: Record) => void;\n\ntype ConfigForLoggerType = {\n  handlers: Array<Handler>,\n  processors: Array<Processor>,\n};\n\ntype Metadata = { [string]: any };\ntype MetadataStyles = { [string]: any };\n\nif (!global.__NIGHTINGALE_GET_CONFIG_FOR_LOGGER) {\n  global.__NIGHTINGALE_GET_CONFIG_FOR_LOGGER = function(): ConfigForLoggerType {\n    return { handlers: [], processors: [] };\n  };\n}\n\nif (!global.__NIGHTINGALE_GET_CONFIG_FOR_LOGGER_RECORD) {\n  global.__NIGHTINGALE_GET_CONFIG_FOR_LOGGER_RECORD = (\n    key: string,\n    level: number,\n  ): ConfigForLoggerType => {\n    const { handlers, processors } = global.__NIGHTINGALE_GET_CONFIG_FOR_LOGGER(key);\n\n    return {\n      handlers: handlers.filter(\n        handler =>\n          level >= handler.minLevel && (!handler.isHandling || handler.isHandling(level, key)),\n      ),\n      processors,\n    };\n  };\n}\n\n/** @private */\nfunction getConfigForLoggerRecord(key: ?string, recordLevel: number): ConfigForLoggerType {\n  return global.__NIGHTINGALE_GET_CONFIG_FOR_LOGGER_RECORD(key, recordLevel);\n}\n\n/**\n * Interface that allows you to log records.\n * This records are treated by handlers\n */\nexport default class Logger {\n  key: string;\n  displayName: ?string;\n  _context: ?Object;\n\n  /**\n   * Create a new Logger\n   *\n   * @param {string} key\n   * @param {string} [displayName]\n   */\n  constructor(key: string, displayName: ?string) {\n    this.key = key;\n    this.displayName = displayName;\n\n    if (!PRODUCTION && key.includes('.')) {\n      throw new Error(`nightingale: \\`.\\` in key is no longer supported (key: ${key})`);\n    }\n  }\n\n  /** @private */\n  getHandlersAndProcessors(recordLevel: number): ConfigForLoggerType {\n    return getConfigForLoggerRecord(this.key, recordLevel);\n  }\n\n  /** @private */\n  getConfig(): ConfigForLoggerType {\n    return global.__NIGHTINGALE_GET_CONFIG_FOR_LOGGER(this.key);\n  }\n\n  /**\n   * Create a child logger\n   */\n  child(childSuffixKey: string, childDisplayName: ?string): Logger {\n    return new Logger(`${this.key}:${childSuffixKey}`, childDisplayName);\n  }\n\n  /**\n   * Create a new Logger with the same key a this attached context\n   *\n   * @example\n   * const loggerMyService = new Logger('app.myService');\n   * function someAction(arg1) {\n   *     const logger = loggerMyService.context({ arg1 });\n   *     logger.info('starting');\n   *     // do stuff\n   *     logger.info('done');\n   * }\n   *\n   */\n  context(context: Object): Logger {\n    const logger = new Logger(this.key);\n    logger.setContext(context);\n    return logger;\n  }\n\n  /**\n   * Set the context of this logger\n   *\n   * @param {Object} context\n   */\n  setContext(context: Object) {\n    this._context = context;\n  }\n\n  /**\n   * Extends existing context of this logger\n   */\n  extendsContext(extendedContext: Object) {\n    Object.assign(this._context, extendedContext);\n  }\n\n  /**\n   * Handle a record\n   *\n   * Use this only if you know what you are doing.\n   */\n  addRecord(record: Object) {\n    const { handlers, processors } = this.getHandlersAndProcessors(record.level);\n\n    if (handlers.length === 0) {\n      if (record.level > levels.ERROR) {\n        // eslint-disable-next-line no-console\n        console.log('[nightingale] no logger for > error level.', {\n          key: record.key,\n          message: record.message,\n        });\n      }\n      return;\n    }\n\n    if (processors) {\n      processors.forEach(process => process(record, record.context));\n    }\n\n    handlers.some(handler => handler.handle(record) === false);\n  }\n\n  /**\n   * Log a message\n   */\n  log(\n    message: string,\n    metadata: ?Metadata,\n    level: number = levels.INFO,\n    options: ?Object = undefined,\n  ) {\n    const context = metadata && metadata.context;\n    if (metadata) {\n      delete metadata.context;\n    }\n\n    let record = {\n      level,\n      key: this.key,\n      displayName: this.displayName,\n      datetime: new Date(),\n      message,\n      context: context || this._context,\n      metadata,\n      extra: {},\n    };\n\n    if (options) {\n      record = Object.assign(options, record);\n    }\n\n    this.addRecord(record);\n  }\n\n  /**\n   * Log a trace message\n   */\n  trace(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.log(message, metadata, levels.TRACE, { metadataStyles });\n  }\n\n  /**\n   * Log a debug message\n   */\n  debug(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.log(message, metadata, levels.DEBUG, { metadataStyles });\n  }\n\n  /**\n   * Notice an info message\n   */\n  notice(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.log(message, metadata, levels.NOTICE, { metadataStyles });\n  }\n\n  /**\n   * Log an info message\n   */\n  info(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.log(message, metadata, levels.INFO, { metadataStyles });\n  }\n\n  /**\n   * Log a warn message\n   */\n  warn(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.log(message, metadata, levels.WARN, { metadataStyles });\n  }\n\n  /**\n   * Log an error message\n   */\n  error(message: string | Error, metadata: Object = {}, metadataStyles: ?MetadataStyles) {\n    if (message instanceof Error) {\n      metadata.error = message;\n      message = `${metadata.error.name}: ${metadata.error.message}`;\n    }\n    this.log(message, metadata, levels.ERROR, { metadataStyles });\n  }\n\n  /**\n   * Log an critical message\n   */\n  critical(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.log(message, metadata, levels.CRITICAL, { metadataStyles });\n  }\n\n  /**\n   * Log a fatal message\n   */\n  fatal(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.log(message, metadata, levels.FATAL, { metadataStyles });\n  }\n\n  /**\n   * Log an alert message\n   */\n  alert(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.log(message, metadata, levels.ALERT, { metadataStyles });\n  }\n\n  /**\n   * Log an inspected value\n   */\n  inspectValue(value: any, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    if (BROWSER) {\n      throw new Error('Not supported for the browser. Prefer `debugger;`');\n    } else {\n      // Note: inspect is a special function for node:\n      // https://github.com/nodejs/node/blob/a1bda1b4deb08dfb3e06cb778f0db40023b18318/lib/util.js#L210\n      value = util.inspect(value, { depth: 6 });\n      this.log(value, metadata, levels.DEBUG, { metadataStyles, styles: ['gray'] });\n    }\n  }\n\n  /**\n   * Log a debugged var\n   */\n  inspectVar(varName: string, varValue: any, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    if (BROWSER) {\n      throw new Error('Not supported for the browser. Prefer `debugger;`');\n    } else {\n      varValue = util.inspect(varValue, { depth: 6 });\n      this.log(`${varName} = ${varValue}`, metadata, levels.DEBUG, {\n        metadataStyles,\n        styles: ['cyan'],\n      });\n    }\n  }\n\n  /**\n   * Alias for infoSuccess\n   */\n  success(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.infoSuccess(message, metadata, metadataStyles);\n  }\n\n  /**\n   * Log an info success message\n   */\n  infoSuccess(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.log(message, metadata, levels.INFO, {\n      metadataStyles,\n      symbol: '✔',\n      styles: ['green', 'bold'],\n    });\n  }\n\n  /**\n   * Log an debug success message\n   */\n  debugSuccess(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.log(message, metadata, levels.DEBUG, {\n      metadataStyles,\n      symbol: '✔',\n      styles: ['green'],\n    });\n  }\n\n  /**\n   * Alias for infoFail\n   */\n  fail(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.infoFail(message, metadata, metadataStyles);\n  }\n\n  /**\n   * Log an info fail message\n   */\n  infoFail(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.log(message, metadata, levels.INFO, {\n      metadataStyles,\n      symbol: '✖',\n      styles: ['red', 'bold'],\n    });\n  }\n\n  /**\n   * Log an debug fail message\n   */\n  debugFail(message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.log(message, metadata, levels.DEBUG, {\n      metadataStyles,\n      symbol: '✖',\n      styles: ['red'],\n    });\n  }\n\n  /**\n   * @returns {number} time to pass to timeEnd\n   */\n  time(\n    message: ?string,\n    metadata: ?Metadata,\n    metadataStyles: ?MetadataStyles,\n    level: number = levels.DEBUG,\n  ): number {\n    if (message) {\n      this.log(message, metadata, level, { metadataStyles });\n    }\n\n    return Date.now();\n  }\n\n  infoTime(message: ?string, metadata: ?Metadata, metadataStyles: ?MetadataStyles): number {\n    return this.time(message, metadata, metadataStyles, levels.INFO);\n  }\n\n  /**\n   * Finds difference between when this method\n   * was called and when the respective time method\n   * was called, then logs out the difference\n   * and deletes the original record\n   */\n  timeEnd(\n    startTime: number,\n    message: string,\n    metadata: ?Metadata,\n    metadataStyles: ?MetadataStyles,\n    level: number = levels.DEBUG,\n    options: ?Object,\n  ) {\n    if (!metadata) metadata = {};\n    const now = Date.now();\n\n    const diffTime = now - startTime;\n\n    if (diffTime < 1000) {\n      metadata.readableTime = `${diffTime}ms`;\n    } else {\n      const seconds = diffTime > 1000 ? Math.floor(diffTime / 1000) : 0;\n      const ms = diffTime - seconds * 1000;\n      metadata.readableTime = `${seconds ? `${seconds}s and ` : ''}${ms}ms`;\n    }\n\n    metadata.timeMs = diffTime;\n    this.log(message, metadata, level, { ...options, metadataStyles });\n  }\n\n  /**\n   * Like timeEnd, but with INFO level\n   */\n  infoTimeEnd(time: number, message: string, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    this.timeEnd(time, message, metadata, metadataStyles, levels.INFO);\n  }\n\n  /**\n   * Like timeEnd, but with INFO level\n   */\n  infoSuccessTimeEnd(\n    time: number,\n    message: string,\n    metadata: ?Metadata,\n    metadataStyles: ?MetadataStyles,\n  ) {\n    this.timeEnd(time, message, metadata, metadataStyles, levels.INFO, {\n      symbol: '✔',\n      styles: ['green', 'bold'],\n    });\n  }\n\n  /**\n   * Log an enter in a function\n   *\n   * @example\n   * class A {\n   *   method(arg1) {\n   *     logger.enter(method, { arg1 });\n   *     // Do your stuff\n   *   }\n   * }\n   *\n   */\n  enter(fn: Function, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    metadata = {\n      functionName: fn.name,\n      ...metadata,\n    };\n    this.log('enter', metadata, levels.TRACE, { metadataStyles });\n  }\n\n  /**\n   * Log an exit in a function\n   *\n   * @example\n   * const logger = new ConsoleLogger('myNamespace.A');\n   * class A {\n   *   method(arg1) {\n   *     // Do your stuff\n   *     logger.exit(method, { arg1 });\n   *   }\n   * }\n   */\n  exit(fn: Function, metadata: ?Metadata, metadataStyles: ?MetadataStyles) {\n    metadata = {\n      functionName: fn.name,\n      ...metadata,\n    };\n    this.log('exit', metadata, levels.TRACE, { metadataStyles });\n  }\n\n  /**\n   * Wrap around a function to log enter and exit of a function\n   *\n   * @example\n   * const logger = new ConsoleLogger('myNamespace.A');\n   * class A {\n   *   method() {\n   *     logger.wrap(method, () => {\n   *       // Do your stuff\n   *     });\n   *   }\n   * }\n   *\n   * @param {Function} fn\n   * @param {Object} [metadata]\n   * @param {Object} [metadataStyles]\n   * @param {Function} callback\n   */\n  wrap(\n    fn: Function,\n    metadata: ?Metadata | Function,\n    metadataStyles: ?MetadataStyles | Function,\n    callback: Function,\n  ) {\n    if (typeof metadata === 'function') {\n      callback = metadata;\n      metadata = undefined;\n    } else if (typeof metadataStyles === 'function') {\n      callback = metadataStyles;\n      metadataStyles = undefined;\n    }\n\n    this.enter(fn, metadata, metadataStyles);\n    callback();\n    this.exit(fn);\n  }\n}\n"],"names":["global","__NIGHTINGALE_GET_CONFIG_FOR_LOGGER","handlers","processors","__NIGHTINGALE_GET_CONFIG_FOR_LOGGER_RECORD","key","level","filter","handler","minLevel","isHandling","getConfigForLoggerRecord","recordLevel","Logger","displayName","includes","Error","childSuffixKey","childDisplayName","context","logger","setContext","_context","extendedContext","assign","record","getHandlersAndProcessors","length","levels","ERROR","log","message","forEach","process","some","handle","metadata","INFO","options","undefined","Date","Object","addRecord","metadataStyles","TRACE","DEBUG","NOTICE","WARN","error","name","CRITICAL","FATAL","ALERT","value","util","inspect","depth","styles","varName","varValue","infoSuccess","infoFail","now","time","startTime","diffTime","readableTime","seconds","Math","floor","timeMs","timeEnd","fn","callback","enter","exit"],"mappings":"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"}