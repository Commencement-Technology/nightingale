{"version":3,"file":"index-browsermodern.es.js","sources":["../src/index.ts"],"sourcesContent":["import { PRODUCTION, POB_TARGET } from 'pob-babel';\nimport Logger, {\n  configure,\n  Level,\n  levels,\n  listenUnhandledErrors,\n} from 'nightingale';\nimport BrowserConsoleHandler from 'nightingale-browser-console';\nimport TerminalConsoleHandler from 'nightingale-console';\n\nexport { configure, addConfig } from 'nightingale';\n\nexport const ConsoleHandler:\n  | typeof BrowserConsoleHandler\n  | typeof TerminalConsoleHandler =\n  POB_TARGET === 'browser' ? BrowserConsoleHandler : TerminalConsoleHandler;\n\nexport { Level, levels };\n\nexport const logger = new Logger('app');\nexport const appLogger = logger;\n\nif (POB_TARGET !== 'browser') {\n  Error.stackTraceLimit = Infinity;\n  listenUnhandledErrors(logger);\n}\n\nconst appMinLevel =\n  POB_TARGET !== 'browser' &&\n  process.env.NIGHTINGALE_APP_MIN_LEVEL === undefined\n    ? Number(process.env.NIGHTINGALE_APP_MIN_LEVEL)\n    : // eslint-disable-next-line unicorn/no-nested-ternary\n    PRODUCTION\n    ? Level.INFO\n    : Level.DEBUG;\n\nconst libMinLevel =\n  POB_TARGET !== 'browser' &&\n  process.env.NIGHTINGALE_LIB_MIN_LEVEL === undefined\n    ? Number(process.env.NIGHTINGALE_LIB_MIN_LEVEL)\n    : Level.INFO;\n\nconfigure(\n  appMinLevel !== libMinLevel\n    ? [\n        {\n          pattern: /^app(:|$)/,\n          handlers: [new ConsoleHandler(appMinLevel)],\n          stop: true,\n        },\n        {\n          handlers: [new ConsoleHandler(libMinLevel)],\n        },\n      ]\n    : [\n        {\n          handlers: [new ConsoleHandler(libMinLevel)],\n        },\n      ],\n);\n"],"names":["ConsoleHandler","BrowserConsoleHandler","logger","Logger","appLogger","appMinLevel","Level","INFO","libMinLevel","configure","pattern","handlers","stop"],"mappings":";;;;MAYaA,cAEoB,GACJC;MAIhBC,MAAM,GAAG,IAAIC,MAAJ,CAAW,KAAX;MACTC,SAAS,GAAGF;AAOzB,MAAMG,WAAW;AAMXC,KAAK,CAACC,IANZ;AASA,MAAMC,WAAW,GAIXF,KAAK,CAACC,IAJZ;AAMAE,SAAS,CACPJ,WAAW,KAAKG,WAAhB,GACI,CACE;AACEE,EAAAA,OAAO,EAAE,WADX;AAEEC,EAAAA,QAAQ,EAAE,CAAC,IAAIX,cAAJ,CAAmBK,WAAnB,CAAD,CAFZ;AAGEO,EAAAA,IAAI,EAAE;AAHR,CADF,EAME;AACED,EAAAA,QAAQ,EAAE,CAAC,IAAIX,cAAJ,CAAmBQ,WAAnB,CAAD;AADZ,CANF,CADJ,GAWI,CACE;AACEG,EAAAA,QAAQ,EAAE,CAAC,IAAIX,cAAJ,CAAmBQ,WAAnB,CAAD;AADZ,CADF,CAZG,CAAT;;;;"}