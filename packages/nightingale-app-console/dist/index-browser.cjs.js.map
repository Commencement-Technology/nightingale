{"version":3,"file":"index-browser.cjs.js","sources":["../src/index.ts"],"sourcesContent":["import { PRODUCTION, POB_TARGET } from 'pob-babel';\nimport { Logger, configure, Level, listenUnhandledErrors } from 'nightingale';\nimport { BrowserConsoleHandler } from 'nightingale-browser-console';\nimport { ConsoleHandler as TerminalConsoleHandler } from 'nightingale-console';\n\nexport { configure, addConfig, levels, Level } from 'nightingale';\n\nexport const ConsoleHandler:\n  | typeof BrowserConsoleHandler\n  | typeof TerminalConsoleHandler =\n  POB_TARGET === 'browser' ? BrowserConsoleHandler : TerminalConsoleHandler;\n\nexport const logger = new Logger('app');\nexport const appLogger = logger;\n\nif (POB_TARGET !== 'browser') {\n  Error.stackTraceLimit = Infinity;\n  listenUnhandledErrors(logger);\n}\n\nconst appMinLevel =\n  POB_TARGET !== 'browser' &&\n  process.env.NIGHTINGALE_APP_MIN_LEVEL !== undefined &&\n  process.env.NIGHTINGALE_APP_MIN_LEVEL !== ''\n    ? Number(process.env.NIGHTINGALE_APP_MIN_LEVEL)\n    : PRODUCTION\n    ? Level.INFO\n    : Level.DEBUG;\n\nconst libMinLevel =\n  POB_TARGET !== 'browser' &&\n  process.env.NIGHTINGALE_LIB_MIN_LEVEL !== undefined &&\n  process.env.NIGHTINGALE_LIB_MIN_LEVEL !== ''\n    ? Number(process.env.NIGHTINGALE_LIB_MIN_LEVEL)\n    : Level.INFO;\n\nconfigure(\n  appMinLevel !== libMinLevel\n    ? [\n        {\n          pattern: /^app(:|$)/,\n          handlers: [new ConsoleHandler(appMinLevel)],\n          stop: true,\n        },\n        {\n          handlers: [new ConsoleHandler(libMinLevel)],\n        },\n      ]\n    : [\n        {\n          handlers: [new ConsoleHandler(libMinLevel)],\n        },\n      ],\n);\n"],"names":["ConsoleHandler","POB_TARGET","BrowserConsoleHandler","TerminalConsoleHandler","logger","Logger","appLogger","Error","stackTraceLimit","Infinity","listenUnhandledErrors","appMinLevel","process","env","NIGHTINGALE_APP_MIN_LEVEL","undefined","Number","PRODUCTION","Level","INFO","DEBUG","libMinLevel","NIGHTINGALE_LIB_MIN_LEVEL","configure","pattern","handlers","stop"],"mappings":";;;;;;;;;IAOaA,cAEoB,GAC/BC,mBAAU,KAAK,SAAf,GAA2BC,+CAA3B,GAAmDC;IAExCC,MAAM,GAAG,IAAIC,kBAAJ,CAAW,KAAX;IACTC,SAAS,GAAGF;;AAEzB,IAAIH,mBAAU,KAAK,SAAnB,EAA8B;AAC5BM,EAAAA,KAAK,CAACC,eAAN,GAAwBC,QAAxB;AACAC,EAAAA,iCAAqB,CAACN,MAAD,CAArB;AACD;;AAED,IAAMO,WAAW,GACfV,mBAAU,KAAK,SAAf,IACAW,OAAO,CAACC,GAAR,CAAYC,yBAAZ,KAA0CC,SAD1C,IAEAH,OAAO,CAACC,GAAR,CAAYC,yBAAZ,KAA0C,EAF1C,GAGIE,MAAM,CAACJ,OAAO,CAACC,GAAR,CAAYC,yBAAb,CAHV,GAIIG,mBAAU,GACVC,iBAAK,CAACC,IADI,GAEVD,iBAAK,CAACE,KAPZ;AASA,IAAMC,WAAW,GACfpB,mBAAU,KAAK,SAAf,IACAW,OAAO,CAACC,GAAR,CAAYS,yBAAZ,KAA0CP,SAD1C,IAEAH,OAAO,CAACC,GAAR,CAAYS,yBAAZ,KAA0C,EAF1C,GAGIN,MAAM,CAACJ,OAAO,CAACC,GAAR,CAAYS,yBAAb,CAHV,GAIIJ,iBAAK,CAACC,IALZ;AAOAI,qBAAS,CACPZ,WAAW,KAAKU,WAAhB,GACI,CACE;AACEG,EAAAA,OAAO,EAAE,WADX;AAEEC,EAAAA,QAAQ,EAAE,CAAC,IAAIzB,cAAJ,CAAmBW,WAAnB,CAAD,CAFZ;AAGEe,EAAAA,IAAI,EAAE;AAHR,CADF,EAME;AACED,EAAAA,QAAQ,EAAE,CAAC,IAAIzB,cAAJ,CAAmBqB,WAAnB,CAAD;AADZ,CANF,CADJ,GAWI,CACE;AACEI,EAAAA,QAAQ,EAAE,CAAC,IAAIzB,cAAJ,CAAmBqB,WAAnB,CAAD;AADZ,CADF,CAZG,CAAT;;;;;;;;;;"}